---
title: "Insider Trading in the US Congress"
author: "Dewin Erkamps 2739941, Alec van der Heijde 2852988"
date: "`r Sys.Date()`"
output: pdf_document
---

# Set-up your environment

```{r package_install, include=FALSE}
install.packages("devtools")
install.packages("rnaturalearth")
install.packages("tidyverse")
install.packages("dplyr")
install.packages("zoo")
install.packages("maps")

```

```{r packages}
library(tidyverse)
library(dplyr)
library(stringr)
library(readr)
library(lubridate)
library(tidyr)
library(ggplot2)
library(rnaturalearth)
library(zoo)
library(maps)

```

# Title Page

Dewin Erkamps, Alec van der Heijde

Goup 4 (4)

C. Schouwenaar (Chantal)

# Part 1 - Identify a Social Problem

Use APA referencing throughout your document. [Here's a link to some explanation.](https://www.mendeley.com/guides/apa-citation-guide/)

## 1.1 Describe the Social Problem

It was a “great time to buy”, Donald Trump has published on his social media just hours before that he made a dramatic trade war that led to big rises in stock markets. After that, The democratic senator Chris Murphy mentioned on his social media that Trump was eager to make money by using private info that he only knew. When White House officials announced that it was his art of the deal , others considered this as an infraction of rules. Public confidence in members of congress' ability to act in the best interests of the country, uninfluenced by personal financial incentives, is essential to maintaining the integrity of democratic institutions. However, recent studies have brought up worries about possible conflicts of interest resulting from American congress members' stock market dealings. A significant study published by Abdurakhmonov et al. discovered that U.S. senators' stock purchases frequently resulted in abnormal positive returns, especially when the senators had jurisdiction over the companies through committee assignments or when the companies had made political connections, such as through lobbying or political donations. The Stop Trading on Congressional Knowledge (STOCK) Act of 2012 sought to address insider trading by forcing members of Congress to make prompt financial transaction disclosures, but enforcement has been difficult. For example, in the beginning of the COVID-19 pandemic in 2020, a number of senators came under fire for stock market activity that occurred after they had received classified briefings. The current regulatory system may have flaws, as evidenced by the fact that no charges have been brought despite the start of the current framework. In response, legislative attempts have continued to these persistent concerns. By expressly defining and prohibiting such behavior, the Insider Trading Prohibition Act (H.R. 2655), which the House approved in 2021, seeks to strengthen prohibitions against trading on material, nonpublic information. The goal of this programming project is to evaluate publicly accessible financial disclosure data in order to find patterns that might point to insider trading by members of congress. By developing tools that analyze congressional financial disclosures and highlight possible illegal transactions, this programming project seeks to help correct that disparity. This initiative aims to increase the transparency of these financial activities by employing data science and programming methods to link transactions to market happenings, legislative changes, and committee assignments. This project ultimately gives the public and watchdog groups the power to hold congress accountable, support a fairer system, and backs the idea that nobody, especially those in positions of authority, should be exempt from the laws that govern everyone else.

# Part 2 - Data Sourcing

## 2.1 Load in the data

Preferably from a URL, but if not, make sure to download the data and store it in a shared location that you can load the data in from. Do not store the data in a folder you include in the Github repository!

```{r loading_data}
senators_full_data<-read.csv("data/Copyofcongress-trading-all.csv")
SP_500_annual_returns <- read_csv("data/sp-500-historical-annual-returns.csv" , skip = 15) ##skip metadata
sp_500_monthly <- read.csv("data/sp500_monthly.csv")
```

## 2.2 Provide a short summary of the dataset(s)

```{r}
head(senators_full_data)
head(SP_500_annual_returns)
head(sp_500_monthly_returns)

```

(Describe Source)For senator_full_data we have 19 variables. Each row represents an individual trade made by a single senator at a given time, and financial information regarding that trade.

For SP_500_annual_returns we have 2 variables

These are things that are usually included in the metadata of the dataset. For your project, you need to provide us with the information from your metadata that we need to understand your dataset of choice.

Limitations of the Datasets:

One major problem of the datasets used in this research is that its data entries are not standardized. For example, date fields are frequently saved as simple text rather than as organized date objects, which can lead to mistakes during data cleaning and make temporal analysis more difficult. The datasets also includes a lot of incomplete data lines, due to missing disclosures or incorrect filings. By distorting the representation of trading activity and possibly underestimating the timing or frequency of insider trades among Members of Congress, these inconsistencies may greatly affect the validity of the results. It is crucial to handle these data problems in order to guarantee the reliability of any insights gained from the analysis.

## 2.3 Describe the type of variables included

Think of things like:

-   Do the variables contain health information or SES information?

-   Have they been measured by interviewing individuals or is the data coming from administrative sources?

*For the sake of this example, I will continue with the assignment...*

# Part 3 - Quantifying

## 3.1 Data cleaning

Say we want to include only larger distances (above 2) in our dataset, we can filter for this.

```{r data_cleaning}
mean(dataset$percollege)
```

Please use a separate 'R block' of code for each type of cleaning. So, e.g. one for missing values, a new one for removing unnecessary variables etc.

## 3.2 Generate necessary variables

Variable 1

```{r gen_var1}

```

Variable 2

```{r gen_var2}

```

## 3.3 Visualize temporal variation

```{r}

```

## 3.4 Visualize spatial variation

```{r visualise_map}
library(ggplot2)
library(dplyr)
library(maps)

us_states <- map_data("state")
congresstrades$state_lower <- tolower(congresstrades$State)

state_trade_counts <- congresstrades %>%
  filter(!is.na(state_lower)) %>%
  filter(Transaction =="Sale")%>%
  group_by(state_lower) %>%
  summarise(num_trades = n())

map_data_joined <- left_join(us_states, state_trade_counts, by = c("region" = "state_lower"))

ggplot(map_data_joined, aes(x = long, y = lat, group = group, fill = num_trades)) +
  geom_polygon(color = "white") +
  coord_fixed(1.3) +
  scale_fill_gradient(low = "lightblue", high = "darkblue", na.value = "grey90") +
  labs(title = "Number of Trades by State", fill = "Trade Count") +
  theme_minimal()
```

This graph is useful for a study on insider trading in the U.S. since it clearly displays the geographic distribution of congress trades by state, which may help spot unusual or trend-related behavior. For instance:

-   Trade concentrations in certain states, such as New Jersey, California, Texas, and Florida, may indicate centers of political or economic activity where insider information is more easily available or regularly acted upon.
-   Outliers, like New Jersey, which has an abnormally high trading activity but a relatively small number of representatives, may point to people or groups that should be looked at more closely. However, this will take a more comprehensive and complicated study.
-   Comparative analysis across states can show whether insider trading is more common in areas with more representation, economic clout, or regulatory laxity.

In general, spatial visualization facilitates a more in-depth investigation of the locations of insider trading and the potential driving factors.

## 3.5 Visualize sub-population variation

What is the poverty rate by state?

```{r visualise_subpopulations}
dataset$inmetro <- dataset$inmetro %>% as.factor()
# Boxplot of poverty rate by state using the 'midwest' dataset
ggplot(dataset, aes(x = inmetro, y = percadultpoverty)) +
  geom_boxplot() +
  labs(
    title = "Distribution of Poverty Rates by Metropolitan status (Midwest counties)",
    x = "Metropolitan Area",
    y = "Poverty Rate of Adults (%)"
  ) +
  theme_minimal() +
  theme(
    legend.position = "right"
  )
```

Here you provide a description of why the plot above is relevant to your specific social problem.

## 3.6 Event analysis

Analyze the relationship between two variables.

```{r analysis}

```

Here you provide a description of why the plot above is relevant to your specific social problem.

# Part 4 - Discussion

## 4.1 Discuss your findings

# Part 5 - Reproducibility

## 5.1 Github repository link

Provide the link to your PUBLIC repository here: ...

## 5.2 Reference list

Use APA referencing throughout your document.
